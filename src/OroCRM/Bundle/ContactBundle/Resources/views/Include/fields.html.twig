{% block orocrm_contactphone_widget %}
    {# // check if block was not included yet #}
    {% set _block = block('orocrm_contactphone_updater_js') %}
    {% if (_block is empty) %}
        {% include 'OroCRMContactBundle:Include:javascript.html.twig' %}
        {{ block('orocrm_contactphone_updater_js')|raw }}
    {% endif %}

    {{ form_widget(form) }}

    <script type="text/javascript">
        require(['jquery', 'orocrm/contactphone/view', 'orocrm/contactphone/collection'],
        function($, ContactPhoneView, ContactPhoneCollection){
            $(function() {
                /** @type orocrm.contactphone.View */
                new ContactPhoneView({
                    el: $('{{ contact }}'),
                    target: $('#{{ id }}'),
                    simpleEl: $('{{ phoneNumber }}'),
                    collection: new ContactPhoneCollection(),
                    showSelect: {{ (choices is not empty)|json_encode }}
                });
            });
        });
    </script>

    <style type="text/css">
        {% if choices %}
            #{{ id }} {
                display: block;
            }

            {{ contact_phone_text_field }} {
                display: none;
            }
        {% else %}
            #{{ id }} {
                display: none;
            }

            {{ contact_phone_text_field }} {
                display: block;
            }
        {% endif %}
    </style>
{% endblock orocrm_contactphone_widget %}
