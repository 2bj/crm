{% import 'OroUIBundle::macros.html.twig' as macros %}

<style>
    .lead-info {
        min-height: 280px;
    }
</style>
<div class="widget-content form-horizontal lead-info box-content row-fluid">
    <div class="responsive-block">
        {{ macros.renderProperty('orocrm.sales.lead.first_name.label'|trans, entity.firstName) }}
        {{ macros.renderProperty('orocrm.sales.lead.last_name.label'|trans, entity.lastName) }}

        {%- if resource_granted('orocrm_contact_view') and entity.contact -%}
            {% set contactView = '<a href="' ~ path('orocrm_contact_view', {'id': entity.contact.id}) ~ '">' ~ entity.contact|oro_format_name ~ '</a>' %}
        {%- else -%}
            {% set contactView = entity.contact ? entity.contact : '' %}
        {%- endif -%}

        {{ macros.renderProperty('orocrm.sales.lead.contact.label'|trans, contactView) }}
        {{ macros.renderProperty('orocrm.sales.lead.job_title.label'|trans, entity.jobTitle) }}

        {%- if resource_granted('orocrm_account_view') and entity.account -%}
            {% set accountView = '<a href="' ~ path('orocrm_account_view', {'id': entity.account.id}) ~ '">' ~ entity.account ~ '</a>' %}
        {%- else -%}
            {% set accountView = entity.account ? entity.account : '' %}
        {%- endif -%}

        {{ macros.renderProperty('orocrm.sales.lead.account.label'|trans, accountView) }}
        {{ macros.renderProperty('orocrm.sales.lead.company_name.label'|trans, entity.companyName) }}
        {{ macros.renderProperty('orocrm.sales.lead.industry.label'|trans, entity.industry) }}
        {{ macros.renderProperty('orocrm.sales.lead.number_of_employees.label'|trans, entity.numberOfEmployees) }}

        {% if dynamic|length %}
            {% for label, item in dynamic %}
                {% if item is iterable %}
                    {% set data = '' %}
                    {% for value in item.values %}
                        {% if value.link is defined and value.link != false  %}
                            {% set data = data ~ '<a href="' ~ value.link ~ '">' ~ value.title ~ '</a>' %}
                        {% else %}
                            {% set data = data ~ value.title %}
                        {% endif %}
                        {% if not loop.last %}
                            {% set data = data ~ ', ' %}
                        {% endif %}
                    {% endfor %}

                    {% set item = data %}
                {% endif %}
                {{ macros.renderProperty(label|trans, item) }}
            {% endfor %}
        {% endif %}
    </div>
    <div class="responsive-block">
        {{ macros.renderProperty('orocrm.sales.lead.email.label'|trans, entity.email ? '<a href="mailto:' ~ entity.email ~ '">' ~ entity.email ~ '</a>' : '') }}
        {{ macros.renderProperty('orocrm.sales.lead.phone_number.label'|trans, entity.phoneNumber ? '<a href="tel:' ~ entity.phoneNumber ~ '">' ~ entity.phoneNumber ~ '</a>' : '') }}
        {{ macros.renderProperty('orocrm.sales.lead.website.label'|trans, entity.website ? '<a href="' ~ entity.website ~ '" class="no-hash">' ~ entity.website ~ '</a>' : '') }}
        {{ macros.renderProperty('orocrm.sales.lead.notes.label'|trans, entity.notes|nl2br) }}
    </div>
</div>
